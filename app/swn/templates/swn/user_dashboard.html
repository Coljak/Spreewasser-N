<!-- user dashboard -->
{% extends "swn/base.html" %}
{% load static %}

{% load leaflet_tags %}
{% load geojson_tags %}

{% block css %}
  {% leaflet_css %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-draw@1.0.4/dist/leaflet.draw.css">
  <link rel="stylesheet" href="{% static 'swn/css/leaflet-sidebar.css' %}" />
  <link rel="stylesheet" href="{% static 'leaflet/fullscreen/Control.FullScreen.css' %}" />
  <link rel="stylesheet" href="{% static 'leaflet/markercluster/MarkerCluster.css' %}">
  <link rel="stylesheet" href="{% static 'leaflet/markercluster/MarkerCluster.Default.css' %}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <link rel="stylesheet" href="{% static "swn/css/style.css" %}"/>
{% endblock css %}

{% block body_block %}
  {% include 'swn/variables.html' %}
  {% comment %} {% for proj in projects %}
    <p><strong>{{ proj.name }}</strong></p>
    <p>{{ proj.field.name }}</p>
    <p>{{ proj.field.user.name }}</p>
  {% endfor %} {% endcomment %}
  Context: {{ context }}
  
  {% comment %} <ul id="display-data">

  </ul> {% endcomment %}
<!-- modal -->
<div class="modal-container"></div>
{% block project_modal %}
  {% include 'swn/project_modal.html' %}
  {% include 'swn/field_name_modal.html' %}
  {% include 'swn/charts_modal.html' %}
{% endblock %}

<!-- map -->
<div class="container">
  <div id="map-container" class="container">
    <div id="map" class="sidebar-map">
      <div id="sidebar" class="sidebar collapsed" tabindex="2">
          <!-- Nav tabs -->
        <div class="sidebar-tabs">
          <ul role="tablist">
            <li><a href="#layerPane" role="tab"><i class="fa fa-bars"></i></a></li>
            <li><a href="#profile" role="tab"><i class="fa fa-user"></i></a></li>
            <li class="disabled"><a href="#messages" role="tab"><i class="fa fa-envelope"></i></a></li>
            <li><a href="{% url 'swn:swn_index' %}" role="tab"><i class="fa fa-home"></i></a></li>
          </ul>
          <ul role="tablist">
            <li><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
          </ul>
        </div>
          <!-- Tab panes -->
        <div class="sidebar-content">
          <div class="sidebar-pane" id="layerPane">
            <h1 class="sidebar-header">
              DÃ¼rrevorhersage
              <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
            </h1>
            <ul class="list-group sidebar-list" id="sidebarLayerList">
              {% comment %} <li class="list-group-item">
                <h5>Baselayers</h5>
              </li> {% endcomment %}
              <li class="list-group-item no-padding-list-group-item">
                <div class="accordion accordion-flush" id="layerAccordion">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="projectRegionAccordionHeading">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#baseLayers-collapse" aria-expanded="false" aria-controls="baseLayers-collapse">
                        Hintergrundkarten
                      </button>
                    </h2>
                    <div id="baseLayers-collapse" class="accordion-collapse collapse" aria-labelledby="projectRegionAccordionHeading" data-bs-parent="#layerAccordion"> 
                      <div class="accordion-body">
                        <hr class="py-0 mt-1 mb-0">
                        <ul id="baseLayerList">
                          <li class="list-group-item">
                            <div class="form-check form-switch mt-2 h6">
                              <input type="checkbox" class="form-check-input" id="projectRegionSwitch" checked>
                              <label class="form-check-label" for="projectRegionSwitch">Spreewasser:N Projektgebiet</label>
                            </div>
                            <div class="form-check form-switch mt-2 h6">
                              <input type="checkbox" class="form-check-input" id="DEMSwitch">
                              <label class="form-check-label" for="projectRegionSwitch">DEM</label>
                            </div>
                          </li>
                          <!--Baselayers are injected in user_dashboard.js-->
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </li>  
            
            </ul>
          </div>

          <div class="sidebar-pane" id="profile">
            <h1 class="sidebar-header">
              Userprofil
              <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
            </h1>
            <ul class="list-group sidebar-list" id="sidebarLayerList">
              <li class="list-group-item ">
                <strong>Username:</strong> {{ user.username }}
              </li>  
              <li class="list-group-item">
                <strong>E-mail:</strong> {{ user.email }}
              </li> 
              
            </ul>
          </div>

          
          <div class="sidebar-pane" id="messages">
            <h1 class="sidebar-header">Messages<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
          </div>
          <div class="sidebar-pane" id="settings">
              <h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
          </div>
        </div>
      </div>
    </div>  
  </div>
</div>
<button  class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#fieldInfoModal">Chart</button>


{% endblock %}
{% block javascript %}
{{ bock.super }}
<script src="{% static 'data/dem_3857.png' %}"></script>
<script>
  const imageUrl= "{% static 'data/dem_3857.png' %}"
</script>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    {% comment %} <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> {% endcomment %}
    <script src="{% static './leaflet/print/leaflet.browser.print.min.js' %}"></script>
    {% comment %} <script src="{% static 'leaflet/markercluster/leaflet.markercluster.js' %}"></script> {% endcomment %}
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    {% comment %} <script src="{% static './leaflet/geocoder/Control.Geocoder.js' %}"></script> {% endcomment %}

    <script src="{% static 'leaflet/fullscreen/Control.FullScreen.js' %}"></script>
    <script src="{% static 'swn/js/leaflet-sidebar.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
    <script src="{% static './data/pilotregion.js' %}"></script>
    <script src="{% static 'swn/js/user_dashboard.js' %}"></script>
    <!-- Tiff overlay -->
    
    
    <script src="https://unpkg.com/chroma-js"></script>
    <script src="https://unpkg.com/georaster-layer-for-leaflet/dist/georaster-layer-for-leaflet.min.js">
    <script src="https://unpkg.com/georaster"></script>
    <script src="https://unpkg.com/proj4"></script>
    <script src="https:///unpkg.com/georaster-layer-for-leaflet@latest"></script>
  {% comment %} <script src="{% static 'dist/leaflet-geotiff-vector.js' %}"></script> {% endcomment %}

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js" defer></script>
<script src="{% static 'swn/js/chart_page.js' %}" defer></script>
{% endblock%}
